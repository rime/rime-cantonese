# Rime schema
# encoding: utf-8

__include: jyut6ping3.schema:/

schema:
  schema_id: jyut6ping3_ipa
  name: 粵語拼音（IPA版）
  version: "2020.09.22"
  author:
    - sgalal <sgalal.me@outlook.com>
    - LeiMaau <leimaau@qq.com>
    - chaaklau <chaakming@gmail.com>
    - laubonghaudoi <laubonghaudoi@icloud.com>
    - tanxpyox <tanxpyox@gmail.com>
    - William915 <William915@gmail.com>
    - szc126 (@szc126)
    - Bing Jeung <bing@ososo.io>
    - Ayaka Mikazuki <ayaka@mail.shn.hk>
  description: |-
    採用香港語言學學會粵語拼音方案
    https://www.lshk.org/jyutping
    支援 IPA 顯示同聲調輸入
    Telegram 用户交流組 https://t.me/rime_cantonese

translator:
  dictionary: jyut6ping3
  prism: jyut6ping3_ipa
  spelling_hints: 8
  preedit_format:
    - xform/ng/ŋ/

    - xform/(^|[ '])(h?)m(qq?|xx?|vv?)?($|[ '])/$1$2m̩$3$4/
    - xform/(^|[ '])(h?)ŋ(qq?|xx?|vv?)?($|[ '])/$1$2ŋ̍$3$4/

    - xform/(^|[ '])yu/$1jy/
    - xform/(^|[ '])jy([ŋk])/$1ju$2/
    - xform/(^|[ '])y([nt])/$1jy$2/
    - xform/(^|[ '])y/$1j/

    - xform/(^|[ 'q])oet/$1Et/  # 兼容新讀音
    - xform/eo|oe/œ/
    - xform/yu/y/
    - xform/aa/r/
    - xlit/aroe/ɐaɔɛ/

    - xform/ɔu/ou/
    - xform/œ[iy]/ɵy̑/
    - xform/œ([nt])/ɵ$1/
    - xform/E/œ/
    - xform/ɛi/ei/
    - xform/i([ŋk])/e$1/
    - xform/u([ŋk])/o$1/        # Bauer & Benedict 1997, 49, 84-85

    - xform/a|ɔ|œ|ɛ|i|u|y/$&ː/  # /[aɔœɛiuy]/$&ː/ 同 /([aɔœɛiuy])/$1ː/ 會產生 bug
    - xform/([ːɐoɵe][iu])ː/$1̯/
    - xform/[ːɐoɵe][ptk]/$&̚/

    - xform/(^|[ '])([ptk])/$1$2ʰ/
    - xform/(^|[ '])kw/$1kʷʰ/
    - xform/(^|[ '])gw/$1kʷ/
    - xform/(^|[ '])q/$1ʔ/
    - xform/c/t͡sʰ/
    - xform/z/t͡s/
    - xlit/bdg/ptk/

    - xform/qq/˨/
    - xform/xx/˩˧/
    - xform/vv/˨˩/
    - xform/q/˧/
    - xform/x/˧˥/
    - xform/v/˥/